"use strict";(self.webpackChunkkrebit_apidocs=self.webpackChunkkrebit_apidocs||[]).push([[7116],{69186:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"authentication/index","title":"Authentication","description":"Krebit uses OAuth 2.0 to authenticate with the API. Follow this guide to set up your connection.","source":"@site/docs/authentication/index.md","sourceDirName":"authentication","slug":"/authentication/","permalink":"/docs/authentication/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/docs/"},"next":{"title":"Users","permalink":"/docs/users/"}}');var t=r(74848),i=r(28453);const o={sidebar_position:2},c="Authentication",a={},l=[{value:"Creating Your App",id:"creating-your-app",level:2},{value:"Generating an Access Token",id:"generating-an-access-token",level:2},{value:"Explanation of Parameters",id:"explanation-of-parameters",level:3},{value:"Example Authorization URL",id:"example-authorization-url",level:3},{value:"Exchanging the Authorization Code for an Access Token",id:"exchanging-the-authorization-code-for-an-access-token",level:2},{value:"Request Parameters",id:"request-parameters",level:3},{value:"Sample Token Request",id:"sample-token-request",level:3},{value:"Sample Response",id:"sample-response",level:3},{value:"Using the Access Token",id:"using-the-access-token",level:2},{value:"Refreshing an Access Token",id:"refreshing-an-access-token",level:2},{value:"Request Parameters",id:"request-parameters-1",level:3},{value:"Sample Refresh Request",id:"sample-refresh-request",level:3},{value:"Sample Response",id:"sample-response-1",level:3},{value:"Notes",id:"notes",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"authentication",children:"Authentication"})}),"\n",(0,t.jsx)(n.p,{children:"Krebit uses OAuth 2.0 to authenticate with the API. Follow this guide to set up your connection."}),"\n",(0,t.jsx)(n.h2,{id:"creating-your-app",children:"Creating Your App"}),"\n",(0,t.jsxs)(n.p,{children:["To start, create your app within the Krebit platform. Upon successful creation, you will receive a ",(0,t.jsx)(n.code,{children:"client_id"})," and a ",(0,t.jsx)(n.code,{children:"client_secret"}),". These credentials are essential for generating an access token, which is required for interacting with the API."]}),"\n",(0,t.jsxs)(n.p,{children:["You create your app by going to ",(0,t.jsx)(n.code,{children:"https://{organization}.krebit.se/developer/my-apps"})," and follow the steps there."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Important note!"})," You will receive your secret in the setup process, the secrets are only shown once so save them in a secure location."]}),"\n",(0,t.jsx)(n.h2,{id:"generating-an-access-token",children:"Generating an Access Token"}),"\n",(0,t.jsx)(n.p,{children:"To generate an access token, direct the user to an authorization URL structured as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"https://{organization}.krebit.se/oauth/authorize?client_id={client_id}&redirect_uri={redirect_uri}&response_type=code&state={state}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"explanation-of-parameters",children:"Explanation of Parameters"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"{organization}"})}),": The subdomain associated with your organization on Krebit (e.g., ",(0,t.jsx)(n.code,{children:"yourcompany.krebit.se"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"{client_id}"})}),": The client ID provided when you created your app."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"{redirect_uri}"})}),": The URL defined during app creation where the user will be redirected after authorization."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"{state}"})}),": A unique, randomly generated string used to prevent Cross-Site Request Forgery (CSRF) attacks."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-authorization-url",children:"Example Authorization URL"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"https://myorganization.krebit.se/oauth/authorize?client_id=abc123&redirect_uri=https://myapp.example.com/callback&response_type=code&state=xyz789\n"})}),"\n",(0,t.jsx)(n.h2,{id:"exchanging-the-authorization-code-for-an-access-token",children:"Exchanging the Authorization Code for an Access Token"}),"\n",(0,t.jsxs)(n.p,{children:["After the user authorizes, they will be redirected to your ",(0,t.jsx)(n.code,{children:"redirect_uri"})," with a ",(0,t.jsx)(n.code,{children:"code"})," parameter. Use this code to request an access token from the token endpoint:"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Token Endpoint"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"POST https://{organization}.krebit.se/api/oauth/token\n"})}),"\n",(0,t.jsx)(n.h3,{id:"request-parameters",children:"Request Parameters"}),"\n",(0,t.jsx)(n.p,{children:"Include the following parameters in the body of your POST request:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"grant_type"})}),": Must be ",(0,t.jsx)(n.code,{children:"authorization_code"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"client_id"})}),": Your client ID"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"client_secret"})}),": Your client secret"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"redirect_uri"})}),": The redirect URI registered for your app"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"code"})}),": The authorization code received from the initial request"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-token-request",children:"Sample Token Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"POST /api/oauth/token HTTP/1.1\nHost: myorganization.krebit.se\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=authorization_code&\nclient_id=abc123&\nclient_secret=supersecret&\nredirect_uri=https://myapp.example.com/callback&\ncode=authcode456\n"})}),"\n",(0,t.jsx)(n.h3,{id:"sample-response",children:"Sample Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "access_token": "abcdef1234567890",\n  "token_type": "Bearer",\n  "expires_in": 3600,\n  "refresh_token": "refresh1234567890"\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"using-the-access-token",children:"Using the Access Token"}),"\n",(0,t.jsxs)(n.p,{children:["Include the ",(0,t.jsx)(n.code,{children:"access_token"})," in the ",(0,t.jsx)(n.code,{children:"Authorization"})," header of your HTTP requests to the API:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"GET /api/resource HTTP/1.1\nHost: myorganization.krebit.se\nAuthorization: Bearer abcdef1234567890\n"})}),"\n",(0,t.jsx)(n.h2,{id:"refreshing-an-access-token",children:"Refreshing an Access Token"}),"\n",(0,t.jsxs)(n.p,{children:["When the ",(0,t.jsx)(n.code,{children:"access_token"})," expires, you can use the ",(0,t.jsx)(n.code,{children:"refresh_token"})," to obtain a new one without requiring the user to reauthorize."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Refresh Token Endpoint"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"POST https://{organization}.krebit.se/api/oauth/token\n"})}),"\n",(0,t.jsx)(n.h3,{id:"request-parameters-1",children:"Request Parameters"}),"\n",(0,t.jsx)(n.p,{children:"Include the following parameters in the body of your POST request:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"grant_type"})}),": Must be ",(0,t.jsx)(n.code,{children:"refresh_token"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"client_id"})}),": Your client ID"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"client_secret"})}),": Your client secret"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"refresh_token"})}),": The refresh token obtained during the initial token request"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"sample-refresh-request",children:"Sample Refresh Request"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-http",children:"POST /api/oauth/token HTTP/1.1\nHost: myorganization.krebit.se\nContent-Type: application/x-www-form-urlencoded\n\ngrant_type=refresh_token&\nclient_id=abc123&\nclient_secret=supersecret&\nrefresh_token=refresh1234567890\n"})}),"\n",(0,t.jsx)(n.h3,{id:"sample-response-1",children:"Sample Response"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "access_token": "newaccess1234567890",\n  "token_type": "Bearer",\n  "expires_in": 3600,\n  "refresh_token": "newrefresh1234567890"\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The new response will include a new ",(0,t.jsx)(n.code,{children:"access_token"})," and possibly a new ",(0,t.jsx)(n.code,{children:"refresh_token"})," if one is issued. Always store the latest ",(0,t.jsx)(n.code,{children:"refresh_token"})," securely."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);