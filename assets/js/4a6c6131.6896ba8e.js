"use strict";(self.webpackChunkkrebit_apidocs=self.webpackChunkkrebit_apidocs||[]).push([[3684],{76295:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"webhooks/index","title":"Webhooks guide","description":"Subscribe to signing lifecycle events, verify payloads, and build resilient webhook consumers.","source":"@site/docs/webhooks/index.md","sourceDirName":"webhooks","slug":"/webhooks/","permalink":"/docs/webhooks/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"description":"Subscribe to signing lifecycle events, verify payloads, and build resilient webhook consumers."},"sidebar":"tutorialSidebar","previous":{"title":"Users guide","permalink":"/docs/users/"},"next":{"title":"API reference","permalink":"/docs/signings/api-reference"}}');var r=s(74848),t=s(28453);const o={sidebar_position:5,description:"Subscribe to signing lifecycle events, verify payloads, and build resilient webhook consumers."},d="Webhooks guide",l={},a=[{value:"Typical workflow",id:"typical-workflow",level:2},{value:"Event catalog",id:"event-catalog",level:2},{value:"Verify signatures",id:"verify-signatures",level:2},{value:"Reliability best practices",id:"reliability-best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"webhooks-guide",children:"Webhooks guide"})}),"\n",(0,r.jsx)(n.p,{children:"Webhooks deliver near real-time updates whenever signings are sent, cancelled, or completed. Use them to keep internal dashboards in sync, trigger downstream automations, or archive completed documents without polling the API."}),"\n",(0,r.jsx)(n.h2,{id:"typical-workflow",children:"Typical workflow"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Register a webhook"})," \u2013 Define the event type(s) you care about and the target URL that should receive notifications."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Store the shared secret"})," \u2013 Creation responses include a signing secret. Save it securely; you will need it to verify payloads."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Handle events"})," \u2013 Expose an HTTPS endpoint that accepts POST requests, validates the signature header, and queues work for processing."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor delivery"})," \u2013 Log attempts and respond quickly with ",(0,r.jsx)(n.code,{children:"2xx"})," status codes. Krebit Sign retries on transient failures and may disable webhooks that repeatedly return errors."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"event-catalog",children:"Event catalog"}),"\n",(0,r.jsx)(n.p,{children:"Common events include:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Event"}),(0,r.jsx)(n.th,{children:"Value"}),(0,r.jsx)(n.th,{children:"Trigger"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Signing sent"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"signing.sent"})}),(0,r.jsx)(n.td,{children:"A draft transitions to live and invitations are dispatched."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Document completed"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"signing.document.completed"})}),(0,r.jsx)(n.td,{children:"A document receives all required signatures."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Signing cancelled"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"signing.cancelled"})}),(0,r.jsx)(n.td,{children:"An active signing is cancelled by an operator or automation."})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"Check your tenant\u2019s event list for additional options; new events become available as the platform evolves."}),"\n",(0,r.jsx)(n.h2,{id:"verify-signatures",children:"Verify signatures"}),"\n",(0,r.jsxs)(n.p,{children:["Webhook requests include an HMAC signature header (",(0,r.jsx)(n.code,{children:"X-Signature"}),") and the client identifier in ",(0,r.jsx)(n.code,{children:"X-Client-Id"}),". The secret returned during creation is used to compute this hash."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import crypto from 'node:crypto';\n\nfunction verifySignature(rawBody: Buffer, signature: string, secret: string) {\n  const expected = crypto\n    .createHmac('sha256', secret)\n    .update(rawBody)\n    .digest('hex');\n  return crypto.timingSafeEqual(Buffer.from(expected), Buffer.from(signature));\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Make sure your HTTP framework provides access to the ",(0,r.jsx)(n.strong,{children:"raw"})," request body. Parsing JSON before computing the signature may change whitespace and break validation."]}),"\n",(0,r.jsx)(n.h2,{id:"reliability-best-practices",children:"Reliability best practices"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Respond quickly"})," \u2013 Acknowledge requests with ",(0,r.jsx)(n.code,{children:"200"})," as soon as you enqueue work. Process the event asynchronously to avoid timeouts."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Handle retries"})," \u2013 Design idempotent consumers. Store the ",(0,r.jsx)(n.code,{children:"id"})," field included in each payload and ignore duplicates."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Secure endpoints"})," \u2013 Require HTTPS, restrict IP ranges if possible, and rotate webhook secrets on a schedule."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test first"})," \u2013 Use tunneling tools or Krebit\u2019s webhook tester to validate your handler before going live."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"No payloads arriving"})," \u2013 Confirm your endpoint is reachable from the public internet and returns ",(0,r.jsx)(n.code,{children:"2xx"})," responses."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Signature mismatch"})," \u2013 Verify you are using the latest secret and the unmodified raw body when calculating the HMAC."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Too many retries"})," \u2013 Log attempts and error messages. Krebit Sign may disable the webhook after repeated failures; re-enable it once your handler recovers."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"When you need the exact payload structure or request fields, open the Webhooks section in the generated API reference from the sidebar."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);